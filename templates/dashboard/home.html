{% extends 'dashboard/base.html' %}
{% load static %}

{% block head_css %}
{% endblock %}

{% block head_js %}
{% endblock %}

{% block content %}
  <div class="container mt-3 mb-5 pb-5">
    <h5>Users ({{ all_users|length }})</h5>
    {{ notification }}
    <table id="report_table" class="table table-bordered table-responsive-md small diplay">
      <thead>
      <tr>
        <th>Email</th>
        <th>Username</th>
        <th>Mobile No.</th>
        <th>Province</th>
        <th>User Type</th>
      </tr>
      </thead>
      <tbody>
      {% for key, user in all_users.items %}
        <tr>
          <td>{{ user.UserEmail }}</td>
          <td>{{ user.UserName }}</td>
          <td>{{ user.UserMobile }}</td>
          <td>{{ user.UserProvince }}</td>
          <td>{{ user.UserType }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}

{% block scripts %}
  <script type="text/javascript">
    $(document).ready(function () {
      var table = $("#report_table").DataTable({
          "iDisplayLength": 20
        });

      table.columns().flatten().each(function (colIdx) {
        // Create the select list and search operation
        var select = $('<select />')
          .appendTo(
            table.column(colIdx).footer()
          )
          .on('change', function () {
            table
              .column(colIdx)
              .search($(this).val())
              .draw();
          });

        // Get the search data for the first column and add to the select list
        table
          .column(colIdx)
          .cache('search')
          .sort()
          .unique()
          .each(function (d) {
            select.append($('<option value="' + d + '">' + d + '</option>'));
          });
      });
    })
  </script>
{% endblock %}